<!doctype html>
<html lang="en" data-dock="left">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>STL Manager â€¢ UI Mockup (Front Page)</title>
    <style>
      :root {
        --drawer-w: 420px; /* default drawer width */
        --frame-border: 6px; /* decorative frame border thickness */
  --drawer-top: 72px; /* drawer top offset (synced to .app top via JS) */
  --drawer-bottom: 24px; /* drawer bottom offset */
        --tabs-offset: 0px; /* additional visual offset for tabs/drawer top */
        --tabs-gap: 10px; /* spacing between tab buttons */
        --rail-w: 64px; /* width of the left tab rail */
        --tab-size: 44px; /* diameter of circular tab */
        --stem-w: 28px; /* width of the rectangular stem */
        --stem-offset: 10px; /* overlap into content */
        --tab-overhang: 36px; /* visible tab portion when drawer is closed */
        --bg-0: #0b0a07;
        --bg-1: #0f0e0a;
        --ink: #0c0a05;
        --panel-fill-top: #12100b;
        --panel-fill-bot: #17140d;
        --gold-dark: #6a4b14;
        --gold-mid: #d8b85a;
        --gold-hi: #f2de8a;
        --text: #e8e4d8;
        --muted: #bdb7a5;
        --accent: #d8b85a;
        --chip: #2a2618;
        --chip-hl: #3a331f;
        --ok: #64d37f;
        --warn: #ffcc66;
        --err: #ee6666;
      }

      /* Light theme overrides */
      [data-theme="light"] {
        --bg-0: #efe9dc;
        --bg-1: #f7f3ea;
        --ink: #1f180b;
        --panel-fill-top: #faf6ec;
        --panel-fill-bot: #eee6d4;
        --gold-dark: #7a5719;
        --gold-mid: #c9a74b;
        --gold-hi: #f2de8a;
        --text: #2e2818;
        --muted: #5f5748;
        --accent: #b8912e;
        --chip: #efe7d5;
        --chip-hl: #e6dcc5;
        --ok: #2f8e4b;
        --warn: #b8821a;
        --err: #b23b3b;
      }

      html, body { height: 100%; margin: 0; }
      body {
        /* Softer vignette with wider falloff for better readability */
        background:
          radial-gradient(1600px 1200px at 20% -10%, var(--bg-1) 0%, var(--bg-0) 72%, #070605 100%);
        color: var(--text);
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif;
      }

      h1, h2, h3 { font-family: "Cinzel", Georgia, serif; letter-spacing: 0.02em; margin: 0; }

      /* Ornate frame from demo (CSS-only) */
      .frame {
        border: var(--frame-border) solid transparent;
        border-radius: 4px;
        background:
          linear-gradient(var(--panel-fill-top), var(--panel-fill-bot)) padding-box,
          linear-gradient(140deg, var(--gold-dark) 0%, var(--gold-mid) 44%, var(--gold-hi) 56%, var(--gold-dark) 100%) border-box;
        box-shadow:
          inset 0 0 0 1px rgba(0,0,0,0.7),
          0 0 0 1px var(--ink),
          0 0 0 3px rgba(216,184,90,0.25),
          0 10px 24px rgba(0,0,0,0.45);
      }
      .frame .content { padding: 14px 16px; }

      /* App shell */
      .topbar {
        display: grid;
        grid-template-columns: 220px 1fr auto;
        gap: 12px;
        align-items: center;
        padding: 12px 16px;
      }
      .brand { display: flex; align-items: baseline; gap: 8px; }
      .brand .title { font-family: "Cinzel", Georgia, serif; font-size: 20px; letter-spacing: 0.04em; }
      .brand .sub { color: var(--muted); font-size: 12px; }

      .segmented {
        display: inline-flex; gap: 6px; background: rgba(0,0,0,0.25); padding: 4px; border-radius: 8px;
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04), 0 1px 0 rgba(0,0,0,0.35);
      }
      .segmented .btn {
        padding: 6px 10px; border-radius: 6px; cursor: pointer; user-select: none;
        background: linear-gradient(#1b190f, #15130c);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05), 0 0 0 1px rgba(0,0,0,0.6);
        color: #e0dccf; /* higher contrast than muted */
      }
      .segmented .btn.active { color: #f5e8b0; background: linear-gradient(#2a2414, #1a170e); }
      [data-theme="light"] .segmented { background: rgba(0,0,0,0.06); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08); }
      [data-theme="light"] .segmented .btn { background: linear-gradient(#f6efe1, #efe6d4); color: #3f3722; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06), 0 0 0 1px rgba(0,0,0,0.12); }
      [data-theme="light"] .segmented .btn.active { color: #1f1a0f; background: linear-gradient(#f2e9d7, #e9dfc9); }

      .rightbar { display: flex; gap: 10px; align-items: center; justify-content: flex-end; }
      .searchbox { display: flex; gap: 8px; align-items: center; }
      .searchbox input {
        background: #1a1811; color: var(--text); border: 1px solid #2a281c; border-radius: 8px; padding: 8px 10px; min-width: 260px;
        box-shadow: inset 0 0 0 1px rgba(0,0,0,0.4);
      }
      [data-theme="light"] .searchbox input {
        background: #f5efe3; color: var(--text); border-color: #cfc4ab; box-shadow: inset 0 0 0 1px rgba(0,0,0,0.08);
      }

      .icon-btn {
        display: inline-flex; align-items: center; gap: 8px; cursor: pointer; user-select: none;
        padding: 8px 10px; border-radius: 8px; color: #f5e8b0;
        background: linear-gradient(#2a2414, #1a170e);
        box-shadow: inset 0 0 0 1px rgba(255,255,255,0.06), 0 0 0 1px rgba(0,0,0,0.6);
        border: none;
      }
      [data-theme="light"] .icon-btn { color: #5f4a16; background: linear-gradient(#faf6ec, #efe6d4); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.06), 0 0 0 1px rgba(0,0,0,0.12); }
      .icon-btn .ico { font-size: 14px; }
      .icon-btn:focus-visible { outline: 2px solid #8ab4f8; outline-offset: 2px; }

      .filters { display: flex; gap: 8px; align-items: center; flex-wrap: wrap; }
      .chip {
        background: var(--chip); color: #efe5c8; border: 1px solid #3c3622; border-radius: 999px; padding: 6px 10px; font-size: 12px;
      }
      .chip.on { background: var(--chip-hl); border-color: #5a4c27; }
      [data-theme="light"] .chip { background: #f3ebd9; border-color: #c8b894; color: #2e2818; }
      [data-theme="light"] .chip.on { background: #ece2c9; border-color: #b8a26d; }

      .app {
        display: grid; grid-template-columns: 260px 1fr; gap: 16px; padding: 0 16px 24px; max-width: 1280px; margin: 0 auto;
      }

      .sidebar { display: flex; flex-direction: column; gap: 16px; }
      .nav { list-style: none; margin: 0; padding: 0; }
      .nav li { padding: 8px 0; color: #e9e3d1; }
      .nav li .small { color: #c7c0ad; font-size: 12px; }
      [data-theme="light"] .nav li { color: #3f3722; }
      [data-theme="light"] .nav li .small { color: #6f644a; }

      .main { display: flex; flex-direction: column; gap: 16px; }

      .kpis { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
      .kpi {
        background: linear-gradient(#15130d, #12100b); border: 1px solid #2a281c; border-radius: 10px; padding: 12px;
        box-shadow: 0 6px 16px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.03);
      }
      .kpi .label { color: #e6e0cf; font-size: 12px; }
      .kpi .value { font-size: 22px; letter-spacing: 0.02em; margin-top: 6px; color: #fff6da; }
      .kpi .trend { font-size: 12px; color: #c7c0ad; }
      [data-theme="light"] .kpi { background: linear-gradient(#faf6ec, #efe6d4); border-color: #cfc4ab; box-shadow: 0 6px 16px rgba(0,0,0,0.12), inset 0 0 0 1px rgba(0,0,0,0.06); }
      [data-theme="light"] .kpi .label { color: #5a5039; }
      [data-theme="light"] .kpi .value { color: #2e2818; }
      [data-theme="light"] .kpi .trend { color: #6b6148; }

      .tiles { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 12px; }
      .tile {
        display: grid; grid-template-columns: auto 1fr; gap: 12px; align-items: center;
        background: linear-gradient(#14120d, #17140e); border: 1px solid #2a281c; border-radius: 10px; padding: 12px;
        box-shadow: 0 8px 18px rgba(0,0,0,0.35), inset 0 0 0 1px rgba(255,255,255,0.03);
      }
      [data-theme="light"] .tile { background: linear-gradient(#f7f1e5, #efe6d4); border-color: #cfc4ab; box-shadow: 0 8px 18px rgba(0,0,0,0.12), inset 0 0 0 1px rgba(0,0,0,0.06); }
      .tile .title { color: #fff3c4; font-weight: 600; letter-spacing: 0.02em; }
      [data-theme="light"] .tile .title { color: #2e2818; }
      .tile .meta { color: #ddd6c2; font-size: 12px; }
      [data-theme="light"] .tile .meta { color: #5a5039; }

      /* Coverage ring */
      .ring {
        --p: 72; /* percent */
        --size: 64px;
        --thick: 8px;
        width: var(--size); height: var(--size); border-radius: 50%; position: relative;
        background:
          conic-gradient(var(--accent) calc(var(--p) * 1%), #2a2618 0);
      }
      .ring::after {
        content: ""; position: absolute; inset: calc(var(--thick)); border-radius: 50%;
        background: radial-gradient(60% 60% at 50% 35%, #17140d 0%, #12100b 60%, #0f0e0a 100%);
        box-shadow: inset 0 0 0 1px rgba(0,0,0,0.65);
      }
      .ring .center { position: absolute; inset: 0; display: grid; place-items: center; font-size: 12px; font-weight: 600; }
      [data-theme="light"] .ring { --accent: #b8912e; }
      [data-theme="light"] .ring::after { background: radial-gradient(60% 60% at 50% 35%, #f2ebdc 0%, #f0e6d2 60%, #e8dcc1 100%); box-shadow: inset 0 0 0 1px rgba(0,0,0,0.15); }
      [data-theme="light"] .ring .center { color: #2e2818; }

      .badge { display: inline-block; padding: 2px 8px; border-radius: 999px; font-size: 11px; margin-right: 6px; background: #1f1b12; border: 1px solid #3a3422; }
      .pill-ok { color: #bff1c9; border-color: #2b6039; background: #11321a; }
      .pill-warn { color: #ffe0a8; border-color: #6d5521; background: #2d2311; }

      .section h2 { margin-bottom: 8px; }

      @media (max-width: 960px) {
        .app { grid-template-columns: 1fr; }
      }

      /* Drawer-attached tabs (fixed at viewport edge, slide with drawer) */
      .drawer-tabs {
        position: fixed;
        left: 0;
        top: calc(var(--drawer-top) + var(--tabs-offset));
        display: flex; flex-direction: column; gap: var(--tabs-gap);
        z-index: 960; /* above frame edge */
        transition: left .22s ease, right .22s ease;
      }
      .drawer-tab {
        position: relative; min-width: calc(var(--tab-overhang) + 28px); height: var(--tab-size);
        padding: 0 12px 0 10px; display: inline-flex; align-items: center; justify-content: flex-start;
        cursor: pointer; border: 0; border-radius: 0 999px 999px 0; /* flat left, round right */
        color: #2b210a; font-weight: 700; font-size: 14px;
        background: linear-gradient(140deg, var(--gold-dark) 0%, var(--gold-mid) 44%, var(--gold-hi) 56%, var(--gold-dark) 100%);
        box-shadow: 0 6px 10px rgba(0,0,0,0.35), inset 0 0 0 2px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.08);
      }
      .drawer-tab:focus-visible { outline: 2px solid #8ab4f8; outline-offset: 2px; }
      .drawer-tab[aria-pressed="true"] { filter: brightness(1.03) contrast(1.02); }
      [data-theme="light"] .drawer-tab { color: #3a2e0f; box-shadow: 0 6px 10px rgba(0,0,0,0.15), inset 0 0 0 2px rgba(0,0,0,0.12), inset 0 0 0 1px rgba(255,255,255,0.25); }
      .drawer-tab .txt { pointer-events: none; }
      .drawer-tab .count { position: absolute; right: 6px; top: 4px; min-width: 18px; height: 18px; padding: 0 4px; border-radius: 999px; background: #16321f; color: #bff1c9; border: 1px solid #2b6039; font-size: 11px; display: none; align-items: center; justify-content: center; }
      .drawer-tab.has-count .count { display: inline-flex; }

      /* Drawer and backdrop */
  .drawer-wrap { position: fixed; inset: 0; pointer-events: none; z-index: 900; }
      .drawer-backdrop { position: absolute; inset: 0; background: rgba(0,0,0,0.35); opacity: 0; transition: opacity .2s ease; }
  .drawer { position: fixed; top: var(--drawer-top); bottom: var(--drawer-bottom); left: calc(-1 * (var(--drawer-w) + (var(--frame-border) * 2))); width: var(--drawer-w); max-width: calc(100vw - 48px); transition: left .22s ease; pointer-events: auto; overflow: visible; z-index: 950; }
    .drawer.open { left: 0; }
    .drawer-wrap.open .drawer-backdrop { opacity: 1; pointer-events: auto; }
  /* When drawer opens, slide tabs to stay attached to its edge (left dock) */
  [data-dock="left"] .drawer.open + .drawer-tabs { left: calc(var(--drawer-w) + (var(--frame-border) * 2)); }

  /* Right-dock variant: drawer on right, tabs protrude to the left */
  [data-dock="right"] .drawer { left: auto; right: calc(-1 * (var(--drawer-w) + (var(--frame-border) * 2))); transition: right .22s ease; }
  [data-dock="right"] .drawer.open { right: 0; }
  [data-dock="right"] .drawer-tabs { left: auto; right: 0; top: calc(var(--drawer-top) + var(--tabs-offset)); }
  [data-dock="right"] .drawer-tab { border-radius: 999px 0 0 999px; justify-content: flex-end; }
  [data-dock="right"] .drawer-tab .count { left: 6px; right: auto; }
  [data-dock="right"] .drawer.open + .drawer-tabs { right: calc(var(--drawer-w) + (var(--frame-border) * 2)); left: auto; }

      /* Design tuner */
      .tuner {
        position: fixed; right: 16px; top: 96px; width: 320px; z-index: 1200; display: none;
      }
      .tuner.open { display: block; }
      .tuner .row { display: grid; grid-template-columns: 1fr auto; gap: 8px; align-items: center; margin: 6px 0; }
      .tuner input[type="range"] { width: 160px; }

      .drawer .header { display: grid; grid-template-columns: 1fr auto auto; align-items: center; gap: 8px; padding: 10px 12px 6px; }
      .drawer .title { font-family: "Cinzel", Georgia, serif; letter-spacing: 0.02em; font-size: 18px; }
      .pin, .close { background: transparent; border: 0; color: #f5e8b0; font-size: 18px; cursor: pointer; padding: 4px 6px; border-radius: 6px; }
      .pin[aria-pressed="true"] { color: #9fe2b0; }
      .drawer .close { font-size: 18px; }
      [data-theme="light"] .drawer .close { color: #3a2e0f; }
      [data-theme="light"] .pin { color: #3a2e0f; }
      .drawer .body { padding: 10px 12px 14px; max-height: calc(100% - 46px); overflow: auto; }
      .drawer .hint { color: #cfc9b6; font-size: 12px; margin-bottom: 8px; }

      .drawer .footer { position: sticky; bottom: 0; background: linear-gradient(var(--panel-fill-top), var(--panel-fill-bot)); padding: 8px 12px; display: flex; gap: 8px; justify-content: flex-end; border-top: 1px solid rgba(0,0,0,0.35); }
      .btn {
        padding: 6px 10px; border-radius: 6px; cursor: pointer; user-select: none; border: 1px solid #3c3622; color: #f5e8b0; background: #1f1b12;
      }
      [data-theme="light"] .btn { color: #2e2818; background: #efe7d5; border-color: #cdbd97; }

      /* Resize handle */
      .drawer-resize { position: absolute; top: 0; right: 0; width: 8px; bottom: 0; cursor: ew-resize; }

  /* Small count badge on tabs when filters applied */
  .drawer-tab .count { position: absolute; right: -4px; top: -4px; min-width: 18px; height: 18px; padding: 0 4px; border-radius: 999px; background: #16321f; color: #bff1c9; border: 1px solid #2b6039; font-size: 11px; display: none; align-items: center; justify-content: center; }
  .drawer-tab.has-count .count { display: inline-flex; }

      /* Tabpanels inside drawer */
      .tabpanel { display: none; }
      .tabpanel.active { display: block; }

      .filters-col { display: grid; grid-template-columns: 1fr; gap: 8px; }
      .filters-col label { display: flex; align-items: center; gap: 8px; font-size: 14px; }
      .pill { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; border: 1px solid #3c3622; background: #1f1b12; color: #f5e8b0; font-size: 12px; }
      [data-theme="light"] .pill { background: #efe7d5; color: #2e2818; border-color: #cdbd97; }
    </style>
  </head>
  <body>
    

    <!-- Backdrop wrapper only -->
    <div id="drawerWrap" class="drawer-wrap" aria-hidden="true">
      <div id="drawerBackdrop" class="drawer-backdrop" tabindex="-1" aria-hidden="true"></div>
    </div>

    <!-- Drawer with tabs attached to its edge -->
    <div id="drawer" class="frame drawer" role="dialog" aria-modal="false" aria-labelledby="drawerTitle">
      <div class="header">
        <div class="title" id="drawerTitle">Filters</div>
        <button class="pin" id="drawerPin" aria-pressed="false" aria-label="Pin drawer">ðŸ“Œ</button>
        <button class="close" id="drawerClose" aria-label="Close">âœ•</button>
      </div>
      <div class="body">
        <section id="panel-lineage" class="tabpanel" role="region" aria-labelledby="tab-lineage">
          <div class="hint">Choose one or more lineages to focus results. Lineage groups models by broad fantasy/sciâ€‘fi families.</div>
          <div class="filters-col">
            <label><input type="checkbox"/> Undead</label>
            <label><input type="checkbox"/> Demons</label>
            <label><input type="checkbox"/> Orcs / Greenskins</label>
            <label><input type="checkbox"/> Elves / Aeldari</label>
            <label><input type="checkbox"/> Soldiers / Humans</label>
            <div>
              <span class="pill">Include proxies</span>
              <span class="pill">Agnostic only</span>
            </div>
          </div>
        </section>

        <section id="panel-base" class="tabpanel" role="region" aria-labelledby="tab-base">
          <div class="hint">Base profile filters help narrow variants by compatible basing standards.</div>
          <div class="filters-col">
            <label><input type="checkbox"/> 25mm round</label>
            <label><input type="checkbox"/> 32mm round</label>
            <label><input type="checkbox"/> 40mm round</label>
            <label><input type="checkbox"/> 50mm round</label>
            <label><input type="checkbox"/> 60mm round</label>
            <label><input type="checkbox"/> 75x42 oval</label>
          </div>
        </section>

        <section id="panel-nsfw" class="tabpanel" role="region" aria-labelledby="tab-nsfw">
          <div class="hint">Control sensitive content visibility. Settings affect Display Models domain primarily.</div>
          <div class="filters-col">
            <label><input type="radio" name="nsfw"/> Hide NSFW entirely</label>
            <label><input type="radio" name="nsfw"/> Blur thumbnails</label>
            <label><input type="radio" name="nsfw"/> Show with badge</label>
          </div>
        </section>

        <section id="panel-more" class="tabpanel" role="region" aria-labelledby="tab-more">
          <div class="hint">Additional quick filters.</div>
          <div class="filters-col">
            <label><input type="checkbox"/> Supported</label>
            <label><input type="checkbox"/> Segmentation available</label>
            <label><input type="checkbox"/> Multiâ€‘part</label>
          </div>
        </section>
      </div>
      <div class="footer">
        <button class="btn" id="drawerClear">Clear</button>
        <button class="btn" id="drawerApply">Apply</button>
      </div>
      <div class="drawer-resize" id="drawerResize" aria-hidden="true"></div>
    </div>
    <div class="drawer-tabs" role="toolbar" aria-label="Quick filters">
      <button class="drawer-tab" id="tab-lineage" data-tab="lineage" aria-pressed="false" title="Lineage"><span class="txt">Lineage</span><span class="count"></span></button>
      <button class="drawer-tab" id="tab-base" data-tab="base" aria-pressed="false" title="Base options"><span class="txt">Base</span><span class="count"></span></button>
      <button class="drawer-tab" id="tab-nsfw" data-tab="nsfw" aria-pressed="false" title="NSFW"><span class="txt">NSFW</span><span class="count"></span></button>
      <button class="drawer-tab" id="tab-more" data-tab="more" aria-pressed="false" title="More filters"><span class="txt">More</span><span class="count"></span></button>
    </div>

    <!-- Design tuner: quick layout iteration controls -->
    <div class="tuner frame" id="designTuner">
      <div class="content">
        <h3>Design Tuner</h3>
        <div class="row"><label>Dock side</label><select id="tDock"><option value="left">Left</option><option value="right">Right</option></select></div>
        <div class="row"><label>Rail width</label><input id="tRail" type="range" min="40" max="120" value="64"><span id="tRailV">64</span></div>
        <div class="row"><label>Tab size</label><input id="tTab" type="range" min="36" max="64" value="44"><span id="tTabV">44</span></div>
        <div class="row"><label>Drawer width</label><input id="tDrawer" type="range" min="280" max="640" value="420"><span id="tDrawerV">420</span></div>
  <div class="row"><label>Tabs offset (px)</label><input id="tTabsOffset" type="range" min="-80" max="160" value="0"><span id="tTabsOffsetV">0</span></div>
  <div class="row"><label>Tabs spacing</label><input id="tTabsGap" type="range" min="0" max="24" value="10"><span id="tTabsGapV">10</span></div>
        <div class="row"><button class="btn" id="tReset">Reset</button><span style="font-size:12px;color:#cfc9b6">T toggles this panel</span></div>
      </div>
    </div>
    <div class="topbar">
      <div class="brand">
        <div class="title">STL Manager</div>
        <div class="sub">Beta</div>
      </div>
      <div class="segmented" role="tablist" aria-label="Domain selector">
        <div class="btn active" role="tab" aria-selected="true">Wargames</div>
        <div class="btn" role="tab">Display</div>
        <div class="btn" role="tab">Scale Models</div>
        <div class="btn" role="tab">Terrain</div>
      </div>
      <div class="rightbar">
        <div class="searchbox">
          <input type="search" placeholder="Search variants, designers, franchises..." aria-label="Search" />
        </div>
        <button id="themeToggle" class="icon-btn" type="button" aria-pressed="false" aria-label="Toggle dark or light theme" title="Toggle theme">
          <span class="ico" id="themeIcon" aria-hidden="true">ðŸŒ™</span>
          <span id="themeLabel" class="hide-sm">Dark</span>
        </button>
      </div>
    </div>

    <div class="topbar" style="padding-top: 0;">
      <div></div>
      <div class="segmented" role="tablist" aria-label="Campaign selector">
        <div class="btn active" role="tab" aria-selected="true">40K</div>
        <div class="btn" role="tab">AoS</div>
        <div class="btn" role="tab">Heresy</div>
        <div class="btn" role="tab">Other Systems</div>
        <div class="btn" role="tab">Agnostic</div>
      </div>
      <div class="filters">
        <span class="chip on">Intended: Tabletop</span>
        <span class="chip">Scale: 1:56</span>
        <span class="chip">Base: 32mm round</span>
        <span class="chip">Confidence â‰¥ 0.7</span>
      </div>
    </div>

    <div class="app">
      <aside class="sidebar">
        <div class="frame">
          <div class="content">
            <h3>Navigation</h3>
            <ul class="nav">
              <li>Dashboard <span class="small">(this page)</span></li>
              <li>Variant Explorer</li>
              <li>Faction Browser</li>
              <li>Systems Browser</li>
              <li>Mismatch Inbox <span class="small">(3 new)</span></li>
              <li>Admin</li>
            </ul>
          </div>
        </div>

        <div class="frame">
          <div class="content">
            <h3>Quick Filters</h3>
            <div class="filters" style="margin-top:8px;">
              <span class="chip">Designer: ArchVillain</span>
              <span class="chip">Unit: Elite</span>
              <span class="chip">Support: Multi-part</span>
              <span class="chip">Segmentation: Yes</span>
            </div>
          </div>
        </div>
      </aside>

      <main class="main">
        <section class="frame section">
          <div class="content">
            <h2>Overview</h2>
            <div class="kpis" style="margin-top:10px;">
              <div class="kpi">
                <div class="label">Total Variants</div>
                <div class="value">12,948</div>
                <div class="trend">+184 this week</div>
              </div>
              <div class="kpi">
                <div class="label">Matched Fields</div>
                <div class="value">78%</div>
                <div class="trend" style="color: var(--ok);">+2.1%</div>
              </div>
              <div class="kpi">
                <div class="label">Open Mismatch Reports</div>
                <div class="value" style="color: var(--warn);">23</div>
                <div class="trend">Median age: 3d</div>
              </div>
              <div class="kpi">
                <div class="label">Designers Known</div>
                <div class="value">412</div>
                <div class="trend">+4</div>
              </div>
            </div>
          </div>
        </section>

        <section class="frame section">
          <div class="content">
            <h2>Faction Browser (40K)</h2>
            <div class="tiles" style="margin-top:10px;">
              <div class="tile">
                <div class="ring" style="--p:82"><div class="center">82%</div></div>
                <div>
                  <div class="title">Adeptus Astartes</div>
                  <div class="meta">Variants: 1,254 â€¢ Open issues: <span class="badge pill-warn">5</span></div>
                </div>
              </div>
              <div class="tile">
                <div class="ring" style="--p:68"><div class="center">68%</div></div>
                <div>
                  <div class="title">Adeptus Mechanicus</div>
                  <div class="meta">Variants: 742 â€¢ Open issues: <span class="badge pill-warn">2</span></div>
                </div>
              </div>
              <div class="tile">
                <div class="ring" style="--p:91"><div class="center">91%</div></div>
                <div>
                  <div class="title">Astra Militarum</div>
                  <div class="meta">Variants: 1,008 â€¢ Open issues: <span class="badge pill-ok">0</span></div>
                </div>
              </div>
              <div class="tile">
                <div class="ring" style="--p:54"><div class="center">54%</div></div>
                <div>
                  <div class="title">Chaos Daemons</div>
                  <div class="meta">Variants: 566 â€¢ Open issues: <span class="badge pill-warn">7</span></div>
                </div>
              </div>
              <div class="tile">
                <div class="ring" style="--p:73"><div class="center">73%</div></div>
                <div>
                  <div class="title">Necrons</div>
                  <div class="meta">Variants: 628 â€¢ Open issues: <span class="badge pill-warn">3</span></div>
                </div>
              </div>
              <div class="tile">
                <div class="ring" style="--p:64"><div class="center">64%</div></div>
                <div>
                  <div class="title">T'au Empire</div>
                  <div class="meta">Variants: 584 â€¢ Open issues: <span class="badge pill-warn">4</span></div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="frame section">
          <div class="content">
            <h2>Queues</h2>
            <div class="tiles" style="margin-top:10px; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));">
              <div class="tile" style="grid-template-columns: 1fr; align-items: start;">
                <div class="title">Top Misses (By volume)</div>
                <div class="meta" style="margin-top:6px;">
                  â€¢ Ork Boyz (multi-kit) â€” designer mismatch<br />
                  â€¢ Eldar Guardians â€” unit role missing<br />
                  â€¢ Sisters Repentia â€” base profile ambiguous
                </div>
              </div>
              <div class="tile" style="grid-template-columns: 1fr; align-items: start;">
                <div class="title">Recently Fixed</div>
                <div class="meta" style="margin-top:6px;">
                  â€¢ Blood Angels Intercessors â€” wargear linked<br />
                  â€¢ Imperial Fists Captain â€” base profile 40mm round<br />
                  â€¢ Necron Immortals â€” designer alias reconciled
                </div>
              </div>
              <div class="tile" style="grid-template-columns: 1fr; align-items: start;">
                <div class="title">Pending Mismatch Reports</div>
                <div class="meta" style="margin-top:6px;">
                  â€¢ #1842 Astra Militarum Heavy Weapons<br />
                  â€¢ #1844 Chaos Terminators loadout<br />
                  â€¢ #1855 Tyranid Warriors kit split
                </div>
              </div>
            </div>
          </div>
        </section>

      </main>
    </div>
  </body>
  <script>
    (function() {
      const storageKey = 'stlmgr_theme';
      const root = document.documentElement;
      function applyTheme(theme) {
        if (theme === 'light') {
          root.setAttribute('data-theme', 'light');
          icon.textContent = 'â˜€ï¸';
          label.textContent = 'Light';
          toggle.setAttribute('aria-pressed', 'true');
        } else {
          root.setAttribute('data-theme', 'dark');
          icon.textContent = 'ðŸŒ™';
          label.textContent = 'Dark';
          toggle.setAttribute('aria-pressed', 'false');
        }
      }
      function systemPref() {
        return (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) ? 'light' : 'dark';
      }
      const saved = localStorage.getItem(storageKey);
      const toggle = document.getElementById('themeToggle');
      const icon = document.getElementById('themeIcon');
      const label = document.getElementById('themeLabel');
      const start = saved === 'light' || saved === 'dark' ? saved : systemPref();
      applyTheme(start);
      toggle.addEventListener('click', () => {
        const next = (root.getAttribute('data-theme') === 'light') ? 'dark' : 'light';
        applyTheme(next);
        try { localStorage.setItem(storageKey, next); } catch (e) {}
      });
    })();
    (function() {
  // Drawer-attached tabs (like a notebook)
      const wrap = document.getElementById('drawerWrap');
      const drawer = document.getElementById('drawer');
      const backdrop = document.getElementById('drawerBackdrop');
      const closeBtn = document.getElementById('drawerClose');
      const pinBtn = document.getElementById('drawerPin');
      const applyBtn = document.getElementById('drawerApply');
      const clearBtn = document.getElementById('drawerClear');
      const resizeHandle = document.getElementById('drawerResize');
  const tabs = Array.from(document.querySelectorAll('.drawer-tab'));
      const panels = {
        lineage: document.getElementById('panel-lineage'),
        base: document.getElementById('panel-base'),
        nsfw: document.getElementById('panel-nsfw'),
        more: document.getElementById('panel-more'),
      };
      const saveKey = 'stlmgr_dock_active';
      const pinKey = 'stlmgr_dock_pinned';
      const wKey = 'stlmgr_drawer_w';

      // Sync drawer top with main content (.app) top
      function syncDrawerTop() {
        const app = document.querySelector('.app');
        if (!app) return;
        const top = Math.max(0, Math.round(app.getBoundingClientRect().top + window.scrollY));
        document.documentElement.style.setProperty('--drawer-top', top + 'px');
      }
      window.addEventListener('resize', syncDrawerTop);
      window.addEventListener('load', syncDrawerTop);
      syncDrawerTop();

      function openDrawer(which) {
        Object.values(panels).forEach(p => p.classList.remove('active'));
        if (panels[which]) panels[which].classList.add('active');
        tabs.forEach(t => t.setAttribute('aria-pressed', String(t.dataset.tab === which)));
        drawer.querySelector('#drawerTitle').textContent = (which || 'Filters').toUpperCase();
        wrap.classList.add('open'); // show backdrop only when open
        drawer.classList.add('open');
        wrap.setAttribute('aria-hidden', 'false');
        try { localStorage.setItem(saveKey, which); } catch (e) {}
      }
      function closeDrawer() {
        if (pinBtn.getAttribute('aria-pressed') === 'true') return; // stay open when pinned
        wrap.classList.remove('open'); // hide backdrop
        drawer.classList.remove('open');
        wrap.setAttribute('aria-hidden', 'true');
        tabs.forEach(t => t.setAttribute('aria-pressed', 'false'));
      }

      tabs.forEach(btn => {
        btn.addEventListener('click', () => {
          const which = btn.dataset.tab;
          const isOpen = wrap.classList.contains('open') && btn.getAttribute('aria-pressed') === 'true';
          if (isOpen) {
            closeDrawer();
          } else {
            openDrawer(which);
          }
        });
      });
      backdrop.addEventListener('click', closeDrawer);
      closeBtn.addEventListener('click', closeDrawer);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape') closeDrawer(); });

      // Start closed; restore last tab selection without auto-opening
      try {
        const last = localStorage.getItem(saveKey);
        if (last && panels[last]) { tabs.find(t => t.dataset.tab === last)?.setAttribute('aria-pressed', 'true'); }
        const pinned = localStorage.getItem(pinKey) === 'true';
        if (pinned) pinBtn.setAttribute('aria-pressed', 'true');
        const savedW = localStorage.getItem(wKey);
        if (savedW) document.documentElement.style.setProperty('--drawer-w', savedW);
      } catch (e) {}

      // Pin/unpin
      pinBtn.addEventListener('click', () => {
        const next = pinBtn.getAttribute('aria-pressed') !== 'true';
        pinBtn.setAttribute('aria-pressed', String(next));
        try { localStorage.setItem(pinKey, String(next)); } catch (e) {}
      });

      // No hover-to-peek; stays open until explicit close

      // Resize
      let resizing = false, startX = 0, startW = 0;
      function onMove(e) {
        if (!resizing) return;
        const dx = (e.clientX || (e.touches && e.touches[0]?.clientX) || 0) - startX;
        const w = Math.max(280, Math.min(640, startW + dx));
        document.documentElement.style.setProperty('--drawer-w', w + 'px');
      }
      function onUp() {
        if (!resizing) return;
        resizing = false;
        try { localStorage.setItem(wKey, getComputedStyle(document.documentElement).getPropertyValue('--drawer-w').trim()); } catch (e) {}
        window.removeEventListener('mousemove', onMove);
        window.removeEventListener('mouseup', onUp);
      }
      resizeHandle.addEventListener('mousedown', (e) => {
        resizing = true; startX = e.clientX; startW = drawer.getBoundingClientRect().width;
        window.addEventListener('mousemove', onMove);
        window.addEventListener('mouseup', onUp);
      });

      // Apply/Clear update count badges (mock behavior for iteration)
      function updateCount(tab, count) {
        const btn = tabs.find(t => t.dataset.tab === tab);
        if (!btn) return;
        let badge = btn.querySelector('.count');
        if (!badge) { badge = document.createElement('span'); badge.className = 'count'; btn.appendChild(badge); }
        if (count > 0) { btn.classList.add('has-count'); badge.textContent = String(count); }
        else { btn.classList.remove('has-count'); badge.textContent = ''; }
      }
      applyBtn.addEventListener('click', () => {
        // Simple heuristic count: number of checked inputs in active panel
        const current = tabs.find(t => t.getAttribute('aria-pressed') === 'true')?.dataset.tab;
        if (!current) return;
        const activeEl = panels[current];
        const count = activeEl ? activeEl.querySelectorAll('input[type="checkbox"]:checked, input[type="radio"]:checked').length : 0;
        updateCount(current, count);
      });
      clearBtn.addEventListener('click', () => {
        const current = tabs.find(t => t.getAttribute('aria-pressed') === 'true')?.dataset.tab;
        if (!current) return;
        const activeEl = panels[current];
        activeEl?.querySelectorAll('input[type="checkbox"], input[type="radio"]').forEach(i => i.checked = false);
        updateCount(current, 0);
      });
    })();
    (function() {
      // Design tuner wiring for fast iteration
      const root = document.documentElement;
      const tuner = document.getElementById('designTuner');
      const sDock = document.getElementById('tDock');
      const rRail = document.getElementById('tRail');
      const rTab = document.getElementById('tTab');
  const rDrawer = document.getElementById('tDrawer');
  const rTabsOffset = document.getElementById('tTabsOffset');
  const rTabsGap = document.getElementById('tTabsGap');
      const vRail = document.getElementById('tRailV');
      const vTab = document.getElementById('tTabV');
  const vDrawer = document.getElementById('tDrawerV');
  const vTabsOffset = document.getElementById('tTabsOffsetV');
  const vTabsGap = document.getElementById('tTabsGapV');
      const reset = document.getElementById('tReset');

      const k = {
        side: 'stlmgr_tune_side', rail: 'stlmgr_tune_rail', tab: 'stlmgr_tune_tab', dw: 'stlmgr_tune_dw', to: 'stlmgr_tune_tabs_offset', tg: 'stlmgr_tune_tabs_gap'
      };

      function apply() {
        root.style.setProperty('--rail-w', rRail.value + 'px');
        root.style.setProperty('--tab-size', rTab.value + 'px');
        root.style.setProperty('--drawer-w', rDrawer.value + 'px');
        vRail.textContent = rRail.value; vTab.textContent = rTab.value; vDrawer.textContent = rDrawer.value;
        root.style.setProperty('--tabs-offset', rTabsOffset.value + 'px');
        root.style.setProperty('--tabs-gap', rTabsGap.value + 'px');
        vTabsOffset.textContent = rTabsOffset.value; vTabsGap.textContent = rTabsGap.value;
        root.setAttribute('data-dock', sDock.value);
        try {
          localStorage.setItem(k.side, sDock.value);
          localStorage.setItem(k.rail, rRail.value);
          localStorage.setItem(k.tab, rTab.value);
          localStorage.setItem(k.dw, rDrawer.value);
          localStorage.setItem(k.to, rTabsOffset.value);
          localStorage.setItem(k.tg, rTabsGap.value);
        } catch (e) {}
      }

      // Load saved
      try {
        const side = localStorage.getItem(k.side); if (side) { sDock.value = side; root.setAttribute('data-dock', side); }
        const rail = localStorage.getItem(k.rail); if (rail) { rRail.value = rail; root.style.setProperty('--rail-w', rail + 'px'); vRail.textContent = rail; }
        const tab = localStorage.getItem(k.tab); if (tab) { rTab.value = tab; root.style.setProperty('--tab-size', tab + 'px'); vTab.textContent = tab; }
  const dw = localStorage.getItem(k.dw); if (dw) { rDrawer.value = dw; root.style.setProperty('--drawer-w', dw + 'px'); vDrawer.textContent = dw; }
  const to = localStorage.getItem(k.to); if (to !== null) { rTabsOffset.value = to; root.style.setProperty('--tabs-offset', to + 'px'); vTabsOffset.textContent = to; }
  const tg = localStorage.getItem(k.tg); if (tg !== null) { rTabsGap.value = tg; root.style.setProperty('--tabs-gap', tg + 'px'); vTabsGap.textContent = tg; }
      } catch (e) {}

  [sDock, rRail, rTab, rDrawer, rTabsOffset, rTabsGap].forEach(el => el.addEventListener('input', apply));
      reset.addEventListener('click', () => {
  sDock.value = 'left'; rRail.value = 64; rTab.value = 44; rDrawer.value = 420; rTabsOffset.value = 0; rTabsGap.value = 10; apply();
      });

      // Toggle tuner with T
      document.addEventListener('keydown', (e) => {
        if (e.key.toLowerCase() === 't' && !e.ctrlKey && !e.metaKey && !e.altKey) {
          tuner.classList.toggle('open');
        }
      });
    })();
  </script>
</html>
