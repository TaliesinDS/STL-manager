<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Workbench Nav Patterns Demo</title>
  <style>
    :root {
      --px: 4px;
      --gap: calc(var(--px) * 4); /* 16px */
      --bar: calc(var(--px) * 12); /* 48px top bar rhythm */
      --chip-h: calc(var(--px) * 10); /* 40px */
      --panel: calc(var(--px) * 36); /* 144px default inline panel height */
      --bg: #0f1115;
      --bg-2: #151924;
      --bg-3: #1b2130;
      --ink: #dfe6f3;
      --ink-dim: #a6b0c8;
      --accent: #8fb3ff;
      --accent-2: #c0d2ff;
      --ok: #7ac77a;
      --outline: #2a344a;
      --shadow: 0 2px 10px rgba(0,0,0,0.35);
      --radius: 10px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
      background: linear-gradient(180deg, #0c0f16, #0a0d12 50%, #0d1016);
      color: var(--ink);
    }

    .topbar {
      height: var(--bar);
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      align-items: center;
      gap: var(--gap);
      padding: 0 var(--gap);
      background: linear-gradient(180deg, #121722, #0c111b);
      border-bottom: 1px solid var(--outline);
      position: sticky; top: 0; z-index: 10;
    }
    .topbar .title { justify-self: start; font-weight: 600; color: var(--accent-2); }
    .topbar .actions { justify-self: end; display: flex; gap: var(--gap); }
    .btn { border: 1px solid var(--outline); background: var(--bg-2); color: var(--ink);
      height: calc(var(--px) * 9); padding: 0 calc(var(--px) * 6); border-radius: calc(var(--px) * 2);
      display: inline-flex; align-items: center; gap: calc(var(--px) * 2); cursor: pointer; }
    .btn:hover { border-color: var(--accent); color: var(--accent); }

    .grid {
      display: grid;
      grid-template-columns: repeat(12, 1fr);
      gap: var(--gap);
      padding: var(--gap);
    }
    .card {
      grid-column: span 6; /* 2-up */
      background: linear-gradient(180deg, #141a25, #10151f);
      border: 1px solid var(--outline);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: clip;
    }
    .card h2 { font-size: 14px; letter-spacing: 0.4px; margin: var(--gap); color: var(--accent-2); }
    .card .body { padding: 0 var(--gap) var(--gap); display: grid; gap: var(--gap); }

    .row { display: flex; align-items: center; gap: var(--gap); flex-wrap: wrap; }
    .chip {
      position: relative;
      display: inline-flex; align-items: center; gap: calc(var(--px) * 3);
      height: var(--chip-h);
      border-radius: calc(var(--px) * 5);
      padding: 0 calc(var(--px) * 6);
      background: linear-gradient(180deg, #182134, #121a2a);
      border: 1px solid var(--outline);
      color: var(--ink);
      cursor: pointer;
      user-select: none;
    }
    .chip:hover { border-color: var(--accent); color: var(--accent); }
    .chip .caret { opacity: 0.8; }
    .chip .segments { display: inline-flex; gap: calc(var(--px) * 2); align-items: center; }
    .seg { display: inline-flex; align-items: center; gap: calc(var(--px) * 2); position: relative; }
    .seg + .seg::before { content: "/"; opacity: 0.5; margin: 0 calc(var(--px) * 2); }

    /* Placeholder flag/icon ahead of first segment; swap to real images later */
    .seg.flag::before {
      content: "";
      display: inline-block;
      width: calc(var(--px) * 4.5);
      height: calc(var(--px) * 4.5);
      border-radius: 2px;
      margin-right: calc(var(--px) * 2);
      border: 1px solid var(--outline);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.04);
      background: linear-gradient(135deg, #2b3550, #1a2336);
      vertical-align: middle;
    }
    .seg.flag.game-40k::before { background: linear-gradient(135deg, #203a7a, #152553); }
    .seg.flag.game-aos::before { background: linear-gradient(135deg, #3a7a20, #265315); }
    .seg.flag.game-30k::before { background: linear-gradient(135deg, #7a3a20, #532615); }

    .inline-panel {
      display: none;
      position: relative;
      width: 100%;
      background: linear-gradient(180deg, #151b28, #121825);
      border: 1px solid var(--outline);
      border-radius: calc(var(--px) * 3);
      padding: var(--gap);
      min-height: calc(var(--px) * 20); /* ensure panel is visible when toggled */
      box-shadow: var(--shadow);
      margin-top: calc(var(--px) * 2);
    }
    .inline-panel.active { display: block; }
    .inline-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: calc(var(--px) * 3); }
    .tile { background: var(--bg-3); border: 1px solid var(--outline); border-radius: calc(var(--px) * 2);
      padding: calc(var(--px) * 4); text-align: center; cursor: pointer; }
    .tile:hover { border-color: var(--accent); color: var(--accent); }

    .stepper { display: inline-flex; gap: calc(var(--px) * 2); align-items: center; }
    .step { display: inline-flex; align-items: center; gap: calc(var(--px) * 2); padding: 0 calc(var(--px) * 4);
      height: var(--chip-h); border: 1px solid var(--outline); border-radius: calc(var(--px) * 2); background: #131a28; cursor: pointer; }
    .step.active { border-color: var(--accent); color: var(--accent); }

    .drawer { display: grid; grid-template-columns: 260px 1fr; gap: var(--gap); }
    .drawer .left { border: 1px solid var(--outline); background: #101723; border-radius: var(--radius); padding: var(--gap); }
    .drawer .right { border: 1px solid var(--outline); background: #0f1621; border-radius: var(--radius); padding: var(--gap); min-height: var(--panel); }
    .section h3 { margin: 0 0 calc(var(--px) * 3) 0; font-size: 12px; letter-spacing: 0.5px; color: var(--ink-dim); }
    .pill { display: inline-flex; align-items: center; height: calc(var(--px) * 8); padding: 0 calc(var(--px) * 4);
      border: 1px solid var(--outline); border-radius: calc(var(--px) * 2); background: #121a28; cursor: pointer; margin: 0 calc(var(--px) * 2) calc(var(--px) * 2) 0; }
    .pill.active { border-color: var(--accent); color: var(--accent); }

    .anchored-panel { position: relative; }
    .anchored-panel .panel { display: none; position: relative; margin-top: calc(var(--px) * 2);
      border: 1px solid var(--outline); background: #101723; border-radius: var(--radius); padding: var(--gap); }
    .anchored-panel .panel.active { display: block; }

    .note { font-size: 12px; color: var(--ink-dim); }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="title">Workbench Nav Patterns</div>
    <div style="justify-self:center; color:var(--ink-dim); font-size:12px;">Warhammer deep-drill prototypes (no floating menus)</div>
    <div class="actions">
      <button class="btn" onclick="resetAll()">Reset</button>
    </div>
  </div>

  <div class="grid">
    <!-- 1) Interactive breadcrumb chip with inline expansion -->
    <section class="card" id="pattern1">
      <h2>1) Interactive breadcrumb chip</h2>
      <div class="body">
        <div class="row">
          <div class="note">Simulate current second-row selection:</div>
          <div class="pill" data-base1="40K">40K</div>
          <div class="pill" data-base1="AoS">AoS</div>
          <div class="pill" data-base1="30K">30K</div>
        </div>
        <div class="row">
          <div class="chip" data-chip id="chip1">
            <span class="segments" id="chip1Segments">
              <span class="seg flag">40K</span>
            </span>
            <span class="caret">▾</span>
          </div>
          <div class="note">Click chip to drill down; selections append as segments.</div>
        </div>
        <div class="inline-panel" id="panel1">
          <div class="inline-grid" id="panel1Grid"></div>
        </div>
      </div>
    </section>

    <!-- 2) Inline stepper strip -->
    <section class="card" id="pattern2">
      <h2>2) Inline stepper strip</h2>
      <div class="body">
        <div class="row">
          <div class="stepper" id="stepper2">
            <div class="step active" data-step="game">Game</div>
            <div class="step" data-step="faction">Faction</div>
            <div class="step" data-step="subfaction">Subfaction</div>
          </div>
        </div>
        <div class="inline-panel active" id="panel2">
          <div class="inline-grid" id="panel2Grid"></div>
        </div>
      </div>
    </section>

    <!-- 3) Guided left drawer -->
    <section class="card" id="pattern3">
      <h2>3) Guided left drawer</h2>
      <div class="body drawer">
        <div class="left">
          <div class="section">
            <h3>Game System</h3>
            <div id="drawerGame" class="row"></div>
          </div>
          <div class="section">
            <h3>Faction</h3>
            <div id="drawerFaction" class="row"></div>
          </div>
          <div class="section">
            <h3>Subfaction</h3>
            <div id="drawerSubfaction" class="row"></div>
          </div>
        </div>
        <div class="right">
          <div class="note" id="drawerStatus">Choose a path on the left to refine.</div>
        </div>
      </div>
    </section>

    <!-- 4) Banner quick-pick, chip for deep-nav -->
    <section class="card" id="pattern4">
      <h2>4) Banner quick-pick → chip deep-nav</h2>
      <div class="body">
        <div class="row">
          <button class="btn" onclick="bannerPick('40K')">40K</button>
          <button class="btn" onclick="bannerPick('AoS')">AoS</button>
          <span class="note">Pick once here, then drill via chip only.</span>
        </div>
        <div class="row">
          <div class="chip" id="chip4" style="display:none;">
            <span class="segments" id="chip4Segments"></span>
            <span class="caret">▾</span>
          </div>
        </div>
        <div class="inline-panel" id="panel4">
          <div class="inline-grid" id="panel4Grid"></div>
        </div>
      </div>
    </section>

    <!-- 5) Anchored wide panel under chip (mega without floating) -->
    <section class="card" id="pattern5">
      <h2>5) Anchored wide panel under chip</h2>
      <div class="body">
        <div class="row anchored-panel">
          <div class="chip" id="chip5">
            <span class="segments" id="chip5Segments"><span class="seg">Warhammer</span></span>
            <span class="caret">▾</span>
          </div>
          <div class="panel" id="panel5">
            <div class="row" style="margin-bottom: var(--gap);">
              <div class="pill active" data-tab5="game">Game</div>
              <div class="pill" data-tab5="faction">Faction</div>
              <div class="pill" data-tab5="subfaction">Subfaction</div>
            </div>
            <div class="inline-grid" id="panel5Grid"></div>
          </div>
        </div>
        <div class="note">Panel pushes content down; no absolute/floating popups.</div>
      </div>
    </section>
  </div>

  <script>
    // Mock data
    const DATA = {
      game: ["40K", "AoS", "30K"],
      faction: {
        "40K": ["Space Marines", "Adeptus Mechanicus", "Chaos Space Marines", "Necrons", "Aeldari"],
        "AoS": ["Order", "Chaos", "Death", "Destruction"],
        "30K": ["Legiones Astartes (Loyalist)", "Legiones Astartes (Traitor)", "Mechanicum", "Solar Auxilia"]
      },
      subfaction: {
        "Space Marines": ["Dark Angels", "Blood Angels", "Ultramarines", "Space Wolves"],
        "Adeptus Mechanicus": ["Ryza", "Lucius", "Metalica"],
        "Chaos Space Marines": ["Black Legion", "World Eaters", "Emperor's Children"],
        "Necrons": ["Sautekh", "Mephrit", "Novokh"],
        "Aeldari": ["Ulthwé", "Biel-Tan", "Saim-Hann"],
        "Order": ["Stormcast Eternals", "Sylvaneth", "Cities of Sigmar"],
        "Chaos": ["Slaves to Darkness", "Hedonites of Slaanesh"],
        "Death": ["Soulblight Gravelords", "Nighthaunt"],
        "Destruction": ["Orruk Warclans", "Gloomspite Gitz", "Ogor Mawtribes"],
        "Legiones Astartes (Loyalist)": ["Dark Angels", "Ultramarines", "Imperial Fists"],
        "Legiones Astartes (Traitor)": ["Sons of Horus", "World Eaters", "Emperor's Children"],
        "Mechanicum": ["Taghmata", "Cybernetica"],
        "Solar Auxilia": ["Cohort", "Veletaris"]
      }
    };

    // Utilities
    function makeTiles(list, click) {
      return list.map(v => {
        const el = document.createElement('div');
        el.className = 'tile';
        el.textContent = v;
        el.addEventListener('click', () => click(v));
        return el;
      });
    }
    function clear(el) { while (el.firstChild) el.removeChild(el.firstChild); }

    // 1) Interactive breadcrumb chip
    const chip1 = document.getElementById('chip1');
    const chip1Seg = document.getElementById('chip1Segments');
    const panel1 = document.getElementById('panel1');
    const panel1Grid = document.getElementById('panel1Grid');
    const state1 = { base: '40K', game: '40K', faction: null, subfaction: null, open: false };
    function render1(level) {
      clear(panel1Grid);
      if (level === 'game') {
        makeTiles(DATA.game, (v) => { state1.base = v; state1.game = v; state1.faction = null; state1.subfaction = null; updateSeg1(); render1('faction'); }).forEach(n => panel1Grid.appendChild(n));
      } else if (level === 'faction' && state1.game) {
        makeTiles(DATA.faction[state1.game], (v) => { state1.faction = v; state1.subfaction = null; updateSeg1(); render1('subfaction'); }).forEach(n => panel1Grid.appendChild(n));
      } else if (level === 'subfaction' && state1.faction) {
        makeTiles(DATA.subfaction[state1.faction] || [], (v) => { state1.subfaction = v; updateSeg1(); panel1.classList.remove('active'); state1.open = false; }).forEach(n => panel1Grid.appendChild(n));
      }
    }
    function updateSeg1() {
      clear(chip1Seg);
      const segs = [state1.base];
      if (state1.faction) segs.push(state1.faction);
      if (state1.subfaction) segs.push(state1.subfaction);
      segs.forEach((s, i) => {
        const span = document.createElement('span');
        // first segment is the base (e.g., 40K/AoS/30K) and gets a flag placeholder
        const cls = i === 0 ? `seg flag ${gameClass(state1.base)}` : 'seg';
        span.className = cls;
        span.textContent = s;
        span.tabIndex = 0;
        span.addEventListener('click', (e) => {
          // prevent bubbling to the chip container which also toggles open/close
          e.stopPropagation();
          if (i === 0) { state1.game = state1.base; state1.faction = state1.subfaction = null; render1('game'); }
          else if (i === 1) { state1.subfaction = null; render1('subfaction'); }
          panel1.classList.add('active'); state1.open = true;
          updateSeg1();
        });
        chip1Seg.appendChild(span);
      });
    }
    chip1.addEventListener('click', (e) => {
      // Single toggle for the whole chip area
      state1.open = !state1.open;
      panel1.classList.toggle('active', state1.open);
      if (state1.open) {
        // Start from faction since base is preselected
        const level = !state1.faction ? 'faction' : 'subfaction';
        render1(level);
      }
    });

    // Simulated second-row selection controls
    document.querySelectorAll('[data-base1]').forEach(p => {
      p.addEventListener('click', () => {
        document.querySelectorAll('[data-base1]').forEach(x => x.classList.remove('active'));
        p.classList.add('active');
        const v = p.getAttribute('data-base1');
        state1.base = v; state1.game = v; state1.faction = state1.subfaction = null;
        updateSeg1();
        if (state1.open) render1('faction');
      });
    });
    // activate default
    const defBaseBtn = document.querySelector('[data-base1="40K"]'); if (defBaseBtn) defBaseBtn.classList.add('active');

    function gameClass(label) {
      const key = (label || '').toLowerCase();
      if (key.includes('40')) return 'game-40k';
      if (key.includes('aos')) return 'game-aos';
      if (key.includes('30')) return 'game-30k';
      return '';
    }

    // 2) Stepper
    const stepper2 = document.getElementById('stepper2');
    const panel2 = document.getElementById('panel2');
    const panel2Grid = document.getElementById('panel2Grid');
    const state2 = { game: null, faction: null, subfaction: null, step: 'game' };
    function render2() {
      clear(panel2Grid);
      if (state2.step === 'game') {
        makeTiles(DATA.game, (v) => { state2.game = v; state2.faction = state2.subfaction = null; setStep2('faction'); }).forEach(n => panel2Grid.appendChild(n));
      } else if (state2.step === 'faction' && state2.game) {
        makeTiles(DATA.faction[state2.game], (v) => { state2.faction = v; state2.subfaction = null; setStep2('subfaction'); }).forEach(n => panel2Grid.appendChild(n));
      } else if (state2.step === 'subfaction' && state2.faction) {
        makeTiles(DATA.subfaction[state2.faction] || [], (v) => { state2.subfaction = v; /* end */ }).forEach(n => panel2Grid.appendChild(n));
      }
    }
    function setStep2(step) {
      state2.step = step;
      [...stepper2.children].forEach(el => el.classList.toggle('active', el.dataset.step === step));
      render2();
    }
    stepper2.addEventListener('click', (e) => {
      const el = e.target.closest('.step'); if (!el) return;
      const want = el.dataset.step;
      if (want === 'faction' && !state2.game) return;
      if (want === 'subfaction' && !state2.faction) return;
      setStep2(want);
    });

    // 3) Guided left drawer
    const drawerGame = document.getElementById('drawerGame');
    const drawerFaction = document.getElementById('drawerFaction');
    const drawerSubfaction = document.getElementById('drawerSubfaction');
    const drawerStatus = document.getElementById('drawerStatus');
    const state3 = { game: null, faction: null, subfaction: null };
    function renderDrawer() {
      // game
      clear(drawerGame);
      DATA.game.forEach(v => {
        const p = document.createElement('div'); p.className = 'pill' + (state3.game===v?' active':''); p.textContent = v;
        p.addEventListener('click', () => { state3.game = v; state3.faction = state3.subfaction = null; renderDrawer(); });
        drawerGame.appendChild(p);
      });
      // faction
      clear(drawerFaction);
      (DATA.faction[state3.game] || []).forEach(v => {
        const p = document.createElement('div'); p.className = 'pill' + (state3.faction===v?' active':''); p.textContent = v;
        p.addEventListener('click', () => { state3.faction = v; state3.subfaction = null; renderDrawer(); });
        drawerFaction.appendChild(p);
      });
      // subfaction
      clear(drawerSubfaction);
      (DATA.subfaction[state3.faction] || []).forEach(v => {
        const p = document.createElement('div'); p.className = 'pill' + (state3.subfaction===v?' active':''); p.textContent = v;
        p.addEventListener('click', () => { state3.subfaction = v; renderDrawer(); });
        drawerSubfaction.appendChild(p);
      });
      drawerStatus.textContent = [state3.game, state3.faction, state3.subfaction].filter(Boolean).join(' / ') || 'Choose a path on the left to refine.';
    }

    // 4) Banner quick-pick then chip
    const chip4 = document.getElementById('chip4');
    const chip4Seg = document.getElementById('chip4Segments');
    const panel4 = document.getElementById('panel4');
    const panel4Grid = document.getElementById('panel4Grid');
    const state4 = { game: null, faction: null, subfaction: null, open: false };
    function bannerPick(g) {
      state4.game = g; state4.faction = state4.subfaction = null;
      chip4.style.display = 'inline-flex';
      updateSeg4();
      panel4.classList.add('active'); state4.open = true;
      render4('faction');
    }
    function render4(level) {
      clear(panel4Grid);
      if (level === 'faction' && state4.game) {
        makeTiles(DATA.faction[state4.game], (v) => { state4.faction = v; state4.subfaction = null; updateSeg4(); render4('subfaction'); }).forEach(n => panel4Grid.appendChild(n));
      } else if (level === 'subfaction' && state4.faction) {
        makeTiles(DATA.subfaction[state4.faction] || [], (v) => { state4.subfaction = v; updateSeg4(); panel4.classList.remove('active'); state4.open = false; }).forEach(n => panel4Grid.appendChild(n));
      }
    }
    chip4.addEventListener('click', () => {
      state4.open = !state4.open;
      panel4.classList.toggle('active', state4.open);
      if (state4.open) render4(!state4.faction ? 'faction' : 'subfaction');
    });
    function updateSeg4() {
      clear(chip4Seg);
      const segs = ['Warhammer', state4.game, state4.faction, state4.subfaction].filter(Boolean);
      segs.forEach((s, i) => {
        const span = document.createElement('span'); span.className = 'seg'; span.textContent = s; span.tabIndex = 0;
        span.addEventListener('click', () => {
          if (i === 0) { state4.game = state4.faction = state4.subfaction = null; chip4.style.display='none'; }
          else if (i === 1) { state4.faction = state4.subfaction = null; }
          else if (i === 2) { state4.subfaction = null; }
          updateSeg4(); panel4.classList.add('active'); state4.open = true; render4(i<=1?'faction':'subfaction');
        });
        chip4Seg.appendChild(span);
      });
    }

    // 5) Anchored wide panel with tabs
    const chip5 = document.getElementById('chip5');
    const chip5Seg = document.getElementById('chip5Segments');
    const panel5 = document.getElementById('panel5');
    const panel5Grid = document.getElementById('panel5Grid');
    const state5 = { open: false, tab: 'game', game: null, faction: null, subfaction: null };
    chip5.addEventListener('click', () => {
      state5.open = !state5.open; panel5.classList.toggle('active', state5.open);
      if (state5.open) render5();
    });
    document.querySelectorAll('[data-tab5]').forEach(p => {
      p.addEventListener('click', () => {
        document.querySelectorAll('[data-tab5]').forEach(x => x.classList.remove('active'));
        p.classList.add('active');
        state5.tab = p.dataset.tab5; render5();
      });
    });
    function render5() {
      clear(panel5Grid);
      if (state5.tab === 'game') {
        makeTiles(DATA.game, (v) => { state5.game = v; state5.faction = state5.subfaction = null; updateSeg5(); /* stay open */ }).forEach(n => panel5Grid.appendChild(n));
      } else if (state5.tab === 'faction') {
        makeTiles(DATA.faction[state5.game] || [], (v) => { state5.faction = v; state5.subfaction = null; updateSeg5(); }).forEach(n => panel5Grid.appendChild(n));
      } else if (state5.tab === 'subfaction') {
        makeTiles(DATA.subfaction[state5.faction] || [], (v) => { state5.subfaction = v; updateSeg5(); }).forEach(n => panel5Grid.appendChild(n));
      }
    }
    function updateSeg5() {
      clear(chip5Seg);
      const segs = ['Warhammer'];
      if (state5.game) segs.push(state5.game);
      if (state5.faction) segs.push(state5.faction);
      if (state5.subfaction) segs.push(state5.subfaction);
      segs.forEach((s, i) => {
        const span = document.createElement('span'); span.className = 'seg'; span.textContent = s; span.tabIndex = 0;
        span.addEventListener('click', () => {
          if (i === 0) { state5.game = state5.faction = state5.subfaction = null; state5.tab = 'game'; }
          else if (i === 1) { state5.faction = state5.subfaction = null; state5.tab = 'faction'; }
          else if (i === 2) { state5.subfaction = null; state5.tab = 'subfaction'; }
          document.querySelectorAll('[data-tab5]').forEach(x => x.classList.remove('active'));
          document.querySelector(`[data-tab5="${state5.tab}"]`).classList.add('active');
          render5(); updateSeg5();
        });
        chip5Seg.appendChild(span);
      });
    }

    // Global reset
    function resetAll() {
      // pattern 1
      state1.game = state1.faction = state1.subfaction = null; state1.open = false; panel1.classList.remove('active'); updateSeg1();
      // pattern 2
      state2.game = state2.faction = state2.subfaction = null; setStep2('game');
      // pattern 3
      state3.game = state3.faction = state3.subfaction = null; renderDrawer();
      // pattern 4
      state4.game = state4.faction = state4.subfaction = null; state4.open = false; chip4.style.display='none'; panel4.classList.remove('active'); clear(panel4Grid); updateSeg4();
      // pattern 5
      state5.open = false; panel5.classList.remove('active'); state5.tab='game'; state5.game = state5.faction = state5.subfaction = null; updateSeg5();
      document.querySelectorAll('[data-tab5]').forEach(x => x.classList.remove('active'));
      document.querySelector('[data-tab5="game"]').classList.add('active');
      render1('game'); render2(); renderDrawer(); render5();
    }

    // Initialize
    updateSeg1(); render1('game');
    setStep2('game');
    renderDrawer();
    updateSeg5(); render5();
  </script>
</body>
</html>
